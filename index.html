<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro y Seguimiento</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap">
    <link rel="shortcut icon" href="img/logoIzq.png" type="image/x-icon">
</head>

<body>
    <header>
        <div class="logo">
            <a href="/">
                <img src="./img/logoIzq.png" alt="Logo de la empresa">
            </a>
        </div>
        <nav>
            <a href="#formulario">Formulario</a>
            <a href="#seguimiento">Seguimiento</a>
            <a href="#" onclick="logout()">Salir</a>
        </nav>
    </header>
    
    <main>
        <section id="formulario">
            <div class="titulo-gestion-efectivos d-flex justify-content-between align-items-center flex-wrap gap-2">
                <h2 class="mb-0">Gestión de Participantes</h2>
                <div class="d-flex align-items-center" role="search">
                    <input type="text" class="form-control" id="filter-nombre" name="filter-nombre" placeholder="Filtrar">
                </div>
            </div>
           
            <div class="gestion-efectivos-layout">
                <!-- Contenido principal (centro) -->
                <main class="contenido-principal">
                    <table class="table table-striped table-hover">
                        <thead class="table-dark">
                            <tr>
                                <th>Nombre</th>
                                <th>Teléfono</th>
                                <th>Proyecto</th>
                                <th>Ciudad</th>
                                <th>Encuadre</th>
                                <th>Monadica</th>
                                <th>Final</th>
                            </tr>
                        </thead>
                        <tbody id="users-body">
                            <tr class="user-row" onclick="showPopup(0)">
                                <td>Sebastian Granada</td>
                                <td>3188901674</td>
                                <td>Proyecto</td>
                                <td>Cali</td>
                                <td>Hecho</td>
                                <td>Pendiente</td>
                                <td>Pendiente</td>
                            </tr>
                        </tbody>
                    </table>
                </main> 
            </div>
        </section>

    </main>
        <!-- Modal Popup -->
        <div class="modal fade modal-custom" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="infoModalLabel">Información reclutamiento</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                    </div>
                    <div class="modal-body" id="modalBodyContent">
                        <!-- Aquí se carga la información dinámica -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Formulario plantilla oculto para el popup -->
        <form id="popupFormTemplate" style="display:none">
            <!-- Bloque: Datos sociodemográficos -->
            <h4 class="fw-bold mt-1 mb-3" style="font-size:1.3rem; color:#8432c6;">Datos sociodemográficos</h4>
            <div class="row g-3 mb-3">
                <div class="col-md-3"><label class="form-label">Origen dato<input class="form-control" data-field="origen" name="origen" type="text"></label></div>
                <div class="col-md-3"><label class="form-label">Nombre y Apellido<input class="form-control" data-field="nombre_apellido" name="nombre_apellido" type="text"></label></div>
                <div class="col-md-3"><label class="form-label">Mamá<input class="form-control" data-field="mama" name="mama" type="text"></label></div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-md-3"><label class="form-label">Cédula<input class="form-control" data-field="cedula" name="cedula" type="text"></label></div>
                <div class="col-md-3"><label class="form-label">Nacionalidad<input class="form-control" data-field="nacionalidad" name="nacionalidad" type="text"></label></div>
                <div class="col-md-1"><label class="form-label">Edad<input class="form-control" data-field="edad" name="edad" type="number"></label></div>
                <div class="col-md-4"><label class="form-label">Dirección<input class="form-control" data-field="direccion" name="direccion" type="text"></label></div>
            </div>
            <div class="row g-3 mb-3">
                
                <div class="col-md-3"><label class="form-label">Barrio<input class="form-control" data-field="barrio" name="barrio" type="text"></label></div>
                <div class="col-md-3"><label class="form-label">NSE<input class="form-control" data-field="nse" name="nse" type="number"></label></div>
                <div class="col-md-3"><label class="form-label">Correo electrónico<input class="form-control" data-field="correo" name="correo" type="email"></label></div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-md-3"><label class="form-label">Teléfono 1<input class="form-control" data-field="telefono1" name="telefono1" type="number"></label></div>
                <div class="col-md-3"><label class="form-label">Teléfono 2<input class="form-control" data-field="telefono2" name="telefono2" type="number"></label></div>
                <div class="col-md-3"><label class="form-label">Teléfono 3<input class="form-control" data-field="telefono3" name="telefono3" type="number"></label></div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-md-3"><label class="form-label"></label></div>
                <div class="col-md-3"><label class="form-label">¿Tiene pensado realizar un viaje en los próximos 2 meses del año?<input class="form-control" data-field="viaje_2meses" name="viaje_2meses" type="text"></label></div>
            </div>

            <!-- Bloque: Datos del bebé -->
            <h4 class="fw-bold mt-4 mb-3" style="font-size:1.3rem; color:#8432c6;">Datos del bebé</h4>
            <div class="row g-3 mb-3">
                <div class="col-md-3"><label class="form-label">Nombre del bebé<input class="form-control" data-field="bebe_nombre" name="bebe_nombre" type="text"></label></div>
                <div class="col-md-3"><label class="form-label">Fecha de nacimiento del bebé<input class="form-control" data-field="bebe_nacimiento" name="bebe_nacimiento" type="date"></label></div>
                <div class="col-md-3"><label class="form-label">Edad del bebé (Meses)<input class="form-control" data-field="bebe_edad_meses" name="bebe_edad_meses" type="number"></label></div>
                <div class="col-md-3"><label class="form-label">Días/Meses<input class="form-control" data-field="bebe_dias_meses" name="bebe_dias_meses" type="text"></label></div>
                <div class="col-md-4"><label class="form-label">Sexo del bebé<input class="form-control" data-field="bebe_sexo" name="bebe_sexo" type="text"></label></div>
            </div>

            <!-- Bloque: Crema antipañalitis -->
            <h4 class="fw-bold mt-4 mb-3" style="font-size:1.3rem; color:#8432c6;">Crema antipañalitis</h4>
            <div class="row g-3 mb-3">
                <div class="col-md-4"><label class="form-label">Marca habitual<input class="form-control" data-field="crema_marca" name="crema_marca" type="text"></label></div>
                <div class="col-md-4"><label class="form-label">Referencia<input class="form-control" data-field="crema_referencia" name="crema_referencia" type="text"></label></div>
                <div class="col-md-4"><label class="form-label">Producto<input class="form-control" data-field="crema_producto" name="crema_producto" type="text"></label></div>
                <div class="col-md-4"><label class="form-label">Frecuencia de días a la semana<input class="form-control" data-field="crema_frecuencia" name="crema_frecuencia" type="number"></label></div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-md-4"><label class="form-label">¿Utiliza otra marca y/o referencia de crema antipañalitis para su bebé? SI/NO<input class="form-control" data-field="otra_crema_si_no" name="otra_crema_si_no" type="text"></label></div>
                <div class="col-md-4"><label class="form-label">¿Cuál es la otra Marca y/o Referencia?<input class="form-control" data-field="otra_crema_marca" name="otra_crema_marca" type="text"></label></div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-md-3"><label class="form-label">Marca y Referencia<input class="form-control" data-field="otra_crema_marca_referencia" name="otra_crema_marca_referencia" type="text"></label></div>
                <div class="col-md-3"><label class="form-label">Razones de uso de esta crema<input class="form-control" data-field="otra_crema_razones" name="otra_crema_razones" type="text"></label></div>
                <div class="col-md-3"><label class="form-label">Profesional<input class="form-control" data-field="profesional" name="profesional" type="text"></label></div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-md-3"><label class="form-label">Frecuencia de días a la semana de uso de esa otra crema<input class="form-control" data-field="otra_crema_frecuencia" name="otra_crema_frecuencia" type="number"></label></div>
                <div class="col-md-3"><label class="form-label">¿Cuántos cambios de pañales realiza a su bebé al día?<input class="form-control" data-field="cambios_panal_dia" name="cambios_panal_dia" type="number"></label></div>
            </div>

            <!-- Bloque: Estatus de Encuadre -->
            <h4 class="fw-bold mt-4 mb-3" style="font-size:1.3rem; color:#8432c6;">Estatus de Encuadre</h4>
            <div class="row g-3 mb-3">
                <div class="col-md-3"><label class="form-label">Fecha de asignación Gestora<input class="form-control" data-field="fecha_asignacion_gestora" name="fecha_asignacion_gestora" type="date"></label></div>
                <div class="col-md-3"><label class="form-label">Fecha de asignación (Supervisora/Analista)<input class="form-control" data-field="fecha_asignacion_supervisora" name="fecha_asignacion_supervisora" type="date"></label></div>
                <div class="col-md-3"><label class="form-label">Fecha de realización (Profesional)<input class="form-control" data-field="fecha_realizacion_profesional" name="fecha_realizacion_profesional" type="date"></label></div>
                <div class="col-md-3"><label class="form-label">Estado<input class="form-control" data-field="estado_encuadre" name="estado_encuadre" type="text"></label></div>
                <div class="col-md-3"><label class="form-label">Tiempo Estatus Encuadre (min)<input class="form-control" data-field="tiempo_estatus_encuadre" name="tiempo_estatus_encuadre" type="number"></label></div>
            </div>

            <!-- Bloque: Cronograma Entrevista Inicial -->
            <h4 class="fw-bold mt-4 mb-3" style="font-size:1.3rem; color:#8432c6;">Cronograma Entrevista Inicial</h4>
            <div class="row g-3 mb-3">
                <div class="col-md-2"><label class="form-label">Fecha ideal mínima<input class="form-control" data-field="fecha_ideal_min" name="fecha_ideal_min" type="date"></label></div>
                <div class="col-md-2"><label class="form-label">Fecha ideal máxima<input class="form-control" data-field="fecha_ideal_max" name="fecha_ideal_max" type="date"></label></div>
                <div class="col-md-2"><label class="form-label">Fecha real<input class="form-control" data-field="fecha_real" name="fecha_real" type="date"></label></div>
                <div class="col-md-2"><label class="form-label">Hora<input class="form-control" data-field="hora" name="hora" type="time"></label></div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-md-3"><label class="form-label">Link entrevista<input class="form-control" data-field="link_entrevista" name="link_entrevista" type="url"></label></div>
                <div class="col-md-3"><label class="form-label">Efectividad<input class="form-control" data-field="efectividad" name="efectividad" type="text"></label></div>
                <div class="col-md-3"><label class="form-label"></label></div>
                <div class="col-md-3"><label class="form-label">Tiempo entrevista inicial (min)<input class="form-control" data-field="tiempo_entrevista_inicial" name="tiempo_entrevista_inicial" type="number"></label></div>
                <div class="col-md-4"><label class="form-label">Calificación tiro al blanco inicial<input class="form-control" data-field="calificacion_tiro_blanco" name="calificacion_tiro_blanco" type="text"></label></div>
            </div>

            <!-- Bloque: Entrega -->
            <h4 class="fw-bold mt-4 mb-3" style="font-size:1.3rem; color:#8432c6;">Entrega</h4>
            <div class="row g-3 mb-3">
                <div class="col-md-4"><label class="form-label">Fecha de entrega de producto<input class="form-control" data-field="fecha_entrega_producto" name="fecha_entrega_producto" type="date"></label></div>
            </div>

            <!-- Bloque: Estatus de Recibo -->
            <h4 class="fw-bold mt-4 mb-3" style="font-size:1.3rem; color:#8432c6;">Estatus de Recibo</h4>
            <div class="row g-3 mb-3">
                <div class="col-md-2"><label class="form-label">Fecha<input class="form-control" data-field="fecha_recibo" name="fecha_recibo" type="date"></label></div>
                <div class="col-md-3"><label class="form-label">Tiempo de estatus de recibo<input class="form-control" data-field="tiempo_estatus_recibo" name="tiempo_estatus_recibo" type="number"></label></div>
                <div class="col-md-3"><label class="form-label">Confirmación verbal del consentimiento informado<input class="form-control" data-field="confirmacion_verbal" name="confirmacion_verbal" type="text"></label></div>
            </div>

            <!-- Bloque: Primera Muestra -->
            <h4 class="fw-bold mt-4 mb-3" style="font-size:1.3rem; color:#8432c6;">Primera Muestra</h4>
            <div class="row g-3 mb-3">
                <div class="col-md-3"><label class="form-label">Fecha ideal inicio muestra<input class="form-control" data-field="fecha_ideal_inicio_muestra" name="fecha_ideal_inicio_muestra" type="date"></label></div>
                <div class="col-md-3"><label class="form-label">Fecha inicio muestra<input class="form-control" data-field="fecha_inicio_muestra" name="fecha_inicio_muestra" type="date"></label></div>
                <div class="col-md-3"><label class="form-label">Fecha ideal seguimiento al uso<input class="form-control" data-field="fecha_ideal_seguimiento_uso" name="fecha_ideal_seguimiento_uso" type="date"></label></div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-md-3"><label class="form-label">Fecha de seguimiento real al uso<input class="form-control" data-field="fecha_seguimiento_real_uso" name="fecha_seguimiento_real_uso" type="date"></label></div>
                <div class="col-md-3"><label class="form-label">Fecha ideal de evaluación monádica<input class="form-control" data-field="fecha_ideal_evaluacion_monadica" name="fecha_ideal_evaluacion_monadica" type="date"></label></div>
                <div class="col-md-3"><label class="form-label">Fecha real de evaluación monádica<input class="form-control" data-field="fecha_real_evaluacion_monadica" name="fecha_real_evaluacion_monadica" type="date"></label></div>
                <div class="col-md-4"><label class="form-label">Tiempo de evaluación monádica (min)<input class="form-control" data-field="tiempo_evaluacion_monadica" name="tiempo_evaluacion_monadica" type="number"></label></div>
                <div class="col-md-4"><label class="form-label">¿Su bebé presentó algún tipo de irritación con el uso de primer producto?<input class="form-control" data-field="irritacion_bebe_primer_producto" name="irritacion_bebe_primer_producto" type="text"></label></div>
            </div>

            <!-- Bloque: Cronograma Final -->
            <h4 class="fw-bold mt-4 mb-3" style="font-size:1.3rem; color:#8432c6;">Cronograma Final</h4>
            <div class="row g-3 mb-3">
                <div class="col-md-3"><label class="form-label">Fecha ideal mínima entrevista final<input class="form-control" data-field="fecha_ideal_min_final" name="fecha_ideal_min_final" type="date"></label></div>
                <div class="col-md-3"><label class="form-label">Fecha ideal máxima entrevista final<input class="form-control" data-field="fecha_ideal_max_final" name="fecha_ideal_max_final" type="date"></label></div>
                <div class="col-md-3"><label class="form-label">Fecha entrevista final<input class="form-control" data-field="fecha_entrevista_final" name="fecha_entrevista_final" type="date"></label></div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-md-3"><label class="form-label">Hora<input class="form-control" data-field="hora_final" name="hora_final" type="time"></label></div>
                <div class="col-md-3"><label class="form-label">Status efectividad<input class="form-control" data-field="status_efectividad_final" name="status_efectividad_final" type="text"></label></div>
                <div class="col-md-3"><label class="form-label">Modalidad entrevista final<input class="form-control" data-field="modalidad_entrevista_final" name="modalidad_entrevista_final" type="text"></label></div>
                <div class="col-md-4"><label class="form-label">Tiempo de entrevista final (min)<input class="form-control" data-field="tiempo_entrevista_final" name="tiempo_entrevista_final" type="number"></label></div>
                <div class="col-md-4"><label class="form-label">Calificación tiro al blanco final<input class="form-control" data-field="calificacion_tiro_blanco_final" name="calificacion_tiro_blanco_final" type="text"></label></div>
            </div>

            <!-- Bloque: Restitución (Profesionales) -->
            <h4 class="fw-bold mt-4 mb-3" style="font-size:1.3rem; color:#8432c6;">Restitución (Profesionales)</h4>
            <div class="row g-3 mb-3">
                <div class="col-md-3"><label class="form-label">Fecha ideal máxima<input class="form-control" data-field="fecha_ideal_maxima_restitucion" name="fecha_ideal_maxima_restitucion" type="date"></label></div>
                <div class="col-md-3"><label class="form-label">Restitución y entregables<input class="form-control" data-field="restitucion_entregables" name="restitucion_entregables" type="text"></label></div>
                <div class="col-md-3"><label class="form-label">Fecha real restitución<input class="form-control" data-field="fecha_real_restitucion" name="fecha_real_restitucion" type="date"></label></div>
            </div>

            <!-- Bloque: Bono -->
            <h4 class="fw-bold mt-4 mb-3" style="font-size:1.3rem; color:#8432c6;">Bono</h4>
            <div class="row g-3 mb-3">
                <div class="col-md-3"><label class="form-label">Fecha ideal de envío a administración (Supervisora)<input class="form-control" data-field="fecha_ideal_envio_admin" name="fecha_ideal_envio_admin" type="date"></label></div>
                <div class="col-md-3"><label class="form-label">Fecha de envío real a administración (Supervisora)<input class="form-control" data-field="fecha_envio_real_admin" name="fecha_envio_real_admin" type="date"></label></div>
                <div class="col-md-3"><label class="form-label">Fecha ideal máxima entrega bono (Administración)<input class="form-control" data-field="fecha_ideal_maxima_entrega_bono" name="fecha_ideal_maxima_entrega_bono" type="date"></label></div>
                <div class="col-md-3"><label class="form-label">Fecha real entrega bono (Administración)<input class="form-control" data-field="fecha_real_entrega_bono" name="fecha_real_entrega_bono" type="date"></label></div>
            </div>
            <div class="col-md-6">
                <label class="form-label" for="observaciones_bono">Observaciones</label>
                <textarea class="form-control" id="observaciones_bono" data-field="observaciones_bono" name="observaciones_bono" rows="3" style="height:auto;"></textarea>
            </div>
            <div class="d-flex justify-content-center mt-3">
                <button type="submit" class="btn btn-morado">Guardar</button>
            </div>
        </form>

        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
        <script>
        const loggedIn = sessionStorage.getItem("loggedIn");
        if (!loggedIn) {
                window.location.href = "login.html";
        }
        function logout() {
                sessionStorage.clear();
                window.location.href = "login.html";
        }

        // Datos de los participantes
        const participantes = [
            {
                //DATOS SOCIODEMOGRAFICOS
                origen: "Formulario web",
                nombre_apellido: "Sebastian Granada",
                mama: "Sí",
                cedula: "1.234.567.890",
                nacionalidad: "Colombiana",
                edad: "29",
                direccion: "Calle 123 #45-67",
                barrio: "San Fernando",
                nse: "4",
                telefono1: "3188901674",
                telefono2: "3115557788",
                telefono3: "",
                correo: "sebastian@example.com",
                viaje_2meses: "No",
                bebe_nombre: "Mateo",
                bebe_nacimiento: "15/03/2024",
                bebe_edad_meses: "17",
                bebe_dias_meses: "17 meses",
                bebe_sexo: "Masculino",
                crema_marca: "MarcaX",
                crema_referencia: "ReferenciaX",
                crema_producto: "ProductoX",
                crema_frecuencia: "5",
                otra_crema_si_no: "No",
                otra_crema_marca: "-",
                otra_crema_marca_referencia: "-",
                otra_crema_razones: "-",
                otra_crema_frecuencia: "-",
                cambios_panal_dia: "6",
                profesional: "Dra. López",
                // ESTATUS DE ENCUADRE
                fecha_asignacion_gestora: "2025-08-01",
                fecha_asignacion_supervisora: "2025-08-02",
                fecha_realizacion_profesional: "2025-08-03 ",
                estado_encuadre: "Completado",
                tiempo_estatus_encuadre: "45",
                // CRONOGRAMA ENTREVISTA INICIAL
                fecha_ideal_min: "2025-08-10",
                fecha_ideal_max: "2025-08-15",
                fecha_real: "2025-08-12",
                hora: "10:00 AM",
                link_entrevista: "https://meet.example.com/abc123",
                efectividad: "Alta",
                tiempo_entrevista_inicial: "35 minutos",
                calificacion_tiro_blanco: "9/10",
                // ENTREGA
                fecha_entrega_producto: "2025-08-20",
                // ESTATUS DE RECIBO
                fecha_recibo: "2025-08-22",
                tiempo_estatus_recibo: "15",
                confirmacion_verbal: "Sí",
                // PRIMERA MUESTRA
                fecha_ideal_inicio_muestra: "2025-08-23",
                fecha_inicio_muestra: "2025-08-24",
                fecha_ideal_seguimiento_uso: "2025-08-27",
                fecha_seguimiento_real_uso: "2025-08-28",
                fecha_ideal_evaluacion_monadica: "2025-08-30",
                fecha_real_evaluacion_monadica: "2025-08-31",
                tiempo_evaluacion_monadica: "20",
                irritacion_bebe_primer_producto: "No",
                // CRONOGRAMA ENTREVISTA FINAL
                fecha_ideal_min_final: "2025-09-05",
                fecha_ideal_max_final: "2025-09-10",
                fecha_entrevista_final: "2025-09-08",
                hora_final: "09:30 AM",
                status_efectividad_final: "Alta (asistió y participó activamente)",
                modalidad_entrevista_final: "Virtual",
                tiempo_entrevista_final: "40",
                calificacion_tiro_blanco_final: "10/10",
                // RESTITUCIÓN (PROFESIONALES)
                fecha_ideal_maxima_restitucion: "2025-09-15",
                restitucion_entregables: "Entregados",
                fecha_real_restitucion: "2025-09-16",
                // BONO
                fecha_ideal_envio_admin: "2025-09-18",
                fecha_envio_real_admin: "2025-09-19",
                fecha_ideal_maxima_entrega_bono: "2025-09-22",
                fecha_real_entrega_bono: "2025-09-23",
                observaciones_bono: "Participante entregó todos los documentos a tiempo.",
            },
            
        ];

        function showPopup(idx) {
            const p = participantes[idx];
            // Clonar el formulario plantilla
            const template = document.getElementById('popupFormTemplate');
            const clone = template.cloneNode(true);
            clone.style.display = '';
            // Rellenar los campos editables
            clone.querySelectorAll('[data-field]').forEach(function(el) {
                const field = el.getAttribute('data-field');
                if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                    el.value = p[field] || '';
                }
            });
            // Manejar submit (puedes personalizar la lógica de guardado aquí)
            clone.onsubmit = function(e) {
                e.preventDefault();
                // Ejemplo: mostrar los datos editados en consola
                const data = {};
                clone.querySelectorAll('[data-field]').forEach(function(el) {
                    data[el.getAttribute('data-field')] = el.value;
                });
                console.log('Datos guardados:', data);
                // Cerrar modal
                var modal = bootstrap.Modal.getInstance(document.getElementById('infoModal'));
                if(modal) modal.hide();
            };
            document.getElementById('modalBodyContent').innerHTML = '';
            document.getElementById('modalBodyContent').appendChild(clone);
            var modal = new bootstrap.Modal(document.getElementById('infoModal'));
            modal.show();
        }
        </script>
</body>
</html>